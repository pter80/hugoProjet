{% extends "base.html" %}

{% block script %}
<script src="views/movie.js" defer></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        //console.log({{arrayPop}}); 
        var data = google.visualization.arrayToDataTable([
          ['Date', 'Popularity'],
          ['07/03',  1000],
          ['2005',  1170],
          ['2006',  660],
          ['2007',  1030]
        ]);

        var options = {
          title: 'Popularity/Date',
          curveType: 'function',
          legend: { position: 'bottom' },
          series: { 0: { color: '#a60000'},
          },
        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
      }
    </script>
{% endblock %}
{% block stylesheet  %}
        {{ parent() }}
        <link type="text/css"  href="views/movie.css" rel="stylesheet" >
{% endblock %}

{% block body %}
    <header>
      <!-- POPUP TRAILER --> 
      <dialog id="btTrailer">
          <button id="closeBtn">❌</button>
          <div style="width: 100%; height: 100%">
          <iframe width="100%" height="100%" src="https://www.youtube.com/embed/{{ keyTrailer }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
      </dialog>
      
      <img src="https://image.tmdb.org/t/p/w300/{{ movie.posterPath }}"  alt="{{ movie.title }}"/>
      <div class="contents">
        <h1>  {{ movie.title }}  </h1>
        <button id="openBtn">▶️ Bande-Annonce</button>
        <p>Réalisateur : {{ director }}</p>
        <p> Genres : {{ movieGenres }}</p>
        <p>Langue original : {{ movie.originalLanguage }}</p>
        <p>Date de sortie  : {{ movie.releaseDate }}</p>
        <p>Popularité  : {{ movie.popularity }}</p>
      </div>
      <p> <span> Synopsis </span> :  {{ movie.overview }}</p>
      <h2>Acteurs principaux : </h2>
      
      <div class="divActor">
       
        {% set i = 0 %}
        <div class="actors">
          <!-- Boucle pour avoir juste les 10 premiers acteurs   -->
          {% for actor in cast %}
          {% set i = i + 1 %}
            {% if i <= 13  %}
            <div class="actor">
              <p>{{  actor.name }}</p>
              <img src="https://image.tmdb.org/t/p/w185/{{  actor.profile_path }}" alt="Photo de : {{ actor.name }}"/>
              <p>{{  actor.character }}</p>
              </div>
            {% endif %}
            
          {% endfor %}
        </div>
      </div>
    
      
   
    
    
{#
    {% for valeur in arrayDate %}
         {% for value in arrayPop %}
             
            <p>{{ value }}</p>
          
          {% endfor %}
            <p>{{ valeur }}</p>
     {% endfor %}
    <div id="curve_chart" style="width: 400px; height: 200px color:#8f8f8f"> </div>
#}
</header>
{% endblock %}